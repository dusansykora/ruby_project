<style>
  table, th, td {
    border: 1px solid black;
  }
  table {
    border-collapse: collapse;
  }
  th, td {
    padding: 10px;
  }
  .block {
    margin-bottom: 20px;
    margin-top: 20px;
  }
</style>

<%= render "shared/band" %>

<table>
  <thead>
    <tr>
      <th>Author</th>
      <th>Text</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @band.opinions.each do |opinion| %>
      <tr>
        <td><%= opinion.user.username %></td>
        <td><%= opinion.text %></td>
        <td>
          <%= form_for [@band, opinion, @reaction] do |f| %>
            <div class="field">
              <%= f.hidden_field :opinion_id, value: opinion.id %>
            </div>
            <div class="field">
              <%= f.hidden_field :positive, value: '1' %>
            </div>
            <div class="actions">
              <%= f.submit "LICK (#{opinion.reactions.select{|reaction| reaction.positive}.count})" %>
            </div>
          <% end %>
        </td>
        <td>
          <%= form_for [@band, opinion, @reaction] do |f| %>
            <div class="field">
              <%= f.hidden_field :opinion_id, value: opinion.id %>
            </div>
            <div class="field">
              <%= f.hidden_field :positive, value: '0' %>
            </div>
            <div class="actions">
              <%= f.submit "DIS-LICK (#{opinion.reactions.select{|reaction| !reaction.positive}.count})" %>
            </div>
          <% end %>
        </td>
        <td><%= link_to 'Edit', edit_band_opinion_path(@band, opinion) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Opinion', new_band_opinion_path(@band) %> |
<%= link_to 'Back', @band %>
